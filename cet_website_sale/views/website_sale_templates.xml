<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2018 Coop IT Easy SCRLfs
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>


  <template id="products_item" name="CET Products Item Design">

      <form class="js_add_cart_variants row" action="/shop/cart/update" method="post">
        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
        <div itemscope="itemscope" itemtype="http://schema.org/Product">
          <div class="col-xs-12 col-sm-3">
            <div class="oe_cet_product_image">
              <a itemprop="url" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))">
                <img class="img-responsive" t-attf-src="{{request.httprequest.url_root}}web/image/product.template/{{product.id}}/image" t-att-alt="product.name" />
              </a>
            </div>
          </div>
          <section class="col-xs-12 col-sm-9">
            <div class="col-xs-12 col-sm-8">
              <div class="oe_p_name">
                <a itemprop="name" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))" t-att-content="product.name" t-field="product.name" />
              </div>
              <div class="oe_p_sub_name">
                <span class="oe_p_ref"># <t t-esc="product.id"/></span>
                <span class="oe_p_latin_name" t-field="product.latin_name"/>
              </div>
              <p class="oe_p_description" t-field="product.description_sale"/>
              <p class="oe_details">
                <a t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))">
                  More details
                </a>
              </p>
            </div>
            <div class="col-xs-12 col-sm-4 text-right">
              <t t-if="show_publish">
                <div id="website_published_button" class="" groups="sales_team.group_sale_manager">
                  <t t-call="website.publish_management">
                    <t t-set="object" t-value="product" />
                    <t t-set="publish_edit" t-value="True" />
                    <t t-set="action" t-value="'product.product_template_action'" />
                  </t>
                </div>
              </t>

              <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="js_product add_to_cart" t-if="product.product_variant_ids">
                <!-- Price -->
                <t t-call="website_sale.product_price" />
                <!-- Variants -->
                <t t-placeholder="select">
                  <input type="hidden" class="product_id" name="product_id" t-att-value="product.product_variant_id.id if len(product.product_variant_ids) == 1 else '0'" />
                  <t t-call="website_sale.variants">
                    <t t-set="ul_class" t-value="'nav-stacked'" />
                  </t>
                </t>
                <p t-if="len(product.product_variant_ids) &gt; 1" class="css_not_available_msg bg-danger" style="padding: 15px;">This combination does not exist.</p>

                <div class="oe_quantity_price">
                  <!-- Quantity Selector -->
                  <div class="oe_p_quantity">
                    <div class="css_quantity input-group oe_website_spinner" contenteditable="false">
                      <a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json">
                        <i class="fa fa-minus"></i>
                      </a>
                      <input type="text" class="form-control quantity" data-min="1" name="add_qty" value="1"/>
                      <a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json">
                        <i class="fa fa-plus"></i>
                      </a>
                    </div>
                  </div>
                  <!-- Add to cart -->
                  <a id="add_to_cart" class="btn btn-primary pull-right js_check_product a-submit js_goto_shop" href="#">Add to Cart</a>
                </div>
              </div>

            </div>
          </section>
        </div>
      </form>

  </template>


  <template id="products_list_view"
    inherit_id="website_sale.products"
    name="CET Products List Design"
    customize_show="True"
    active="True">
    <xpath expr="//div[@id='products_grid']" position="replace">
      <div id="products_grid" class="oe_cet_product_grid col-md-12">
        <t t-foreach="products" t-as="product">
          <div class="oe_cet_product"
            t-att-data-publish="product.website_published and 'on' or 'off'">
            <t t-call="cet_website_sale.products_item">
              <t t-set="show_publish" t-value="True" />
            </t>
          </div>
        </t>
        <div t-if="not products" class="oe_cet_no_product col-xs-12">
          No product found
        </div>
      </div>
    </xpath>
  </template>


  <template id="product_detail_section">
    <section id="product_detail" t-attf-class="oe_cet_product_detail container oe_website_sale #{(compute_currency(product.lst_price) - product.website_price) &gt; 0.01 and website.get_current_pricelist().discount_policy == 'without_discount'  and 'discount'}">
      <!-- Breadcrumb -->
      <div class="oe_category_breadcrumb row">
        <div class="col-xs-12 col-sm-8 col-md-9 col-lg-10">
          <t t-call="website_sale_category_breadcrumb.category_breadcrumb">
            <t t-set="b_class" t-value="'breadcrumb'"/>
          </t>
        </div>
        <t t-call="website_sale.search">
          <t t-set="search_class"
             t-value="'col-xs-12 col-sm-4 col-md-3 col-lg-2 o_website_sale_search'"/>
        </t>
      </div>
      <!-- Action button -->
      <div class="oe_cet_pd_action row">
        <div id="website_published_button" class="col-sm-3">
        </div>
        <div class="col-sm-2 text-right">
          <t t-call="website_sale.pricelist_list" />
        </div>
      </div>
      <!-- Product -->
      <div class="oe_cet_pd_product row">
        <div class="col-xs-12 col-sm-5 col-md-6">
          <div class="oe_cet_product_image">
            <img class="img-responsive"
              t-attf-src="{{request.httprequest.url_root}}web/image/product.template/{{product.id}}/image"
              t-att-alt="product.name"
              itemprop="image"/>
          </div>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-6">
          <div class="oe_p_name" t-field="product.name" itemprop="name"/>
          <span itemprop="url" class="hidden" t-esc="'%sshop/product/%s' % (request.httprequest.url_root, slug(product))"/>
          <div class="oe_p_sub_name">
            <span class="oe_p_ref"># <t t-esc="product.id"/></span>
            <span class="oe_p_latin_name" t-field="product.latin_name"/>
          </div>
          <form action="/shop/cart/update" class="js_add_cart_variants" method="POST">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
            <div class="js_product" t-if="product.product_variant_ids">
              <t t-call="website_sale.product_price" />
              <t t-placeholder="select">
                <input type="hidden" class="product_id" name="product_id" t-att-value="product.product_variant_id.id if len(product.product_variant_ids) == 1 else '0'" />
                <t t-call="website_sale.variants">
                  <t t-set="ul_class" t-value="'nav-stacked'" />
                </t>
              </t>
              <p t-if="len(product.product_variant_ids) &gt; 1" class="css_not_available_msg bg-danger" style="padding: 15px;">This combination does not exist.</p>
              <div class="oe_quantity_price">
                <!-- Quantity Selector -->
                <div class="oe_p_quantity pull-left">
                  <div class="css_quantity input-group oe_website_spinner" contenteditable="false">
                    <a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json">
                      <i class="fa fa-minus"></i>
                    </a>
                    <input type="text" class="form-control quantity" data-min="1" name="add_qty" value="1"/>
                    <a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json">
                      <i class="fa fa-plus"></i>
                    </a>
                  </div>
                </div>
                <!-- Add to cart -->
                <a id="add_to_cart" class="btn btn-primary js_check_product a-submit" href="#">Add to Cart</a>
              </div>
            </div>
          </form>
          <div class="panel-group" id="oe_collapse_product" role="tablist" aria-multiselectable="true">
            <div class="panel panel-default">
              <div class="panel-heading" role="tab" id="oe_collapse_p_description">
                <h4 class="panel-title">
                  <a role="button" data-toggle="collapse" data-parent="#oe_collapse_product" href="#oe_p_description" aria-expanded="true" aria-controls="oe_p_description">
                    Description
                  </a>
                </h4>
              </div>
              <div id="oe_p_description" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="oe_collapse_p_description">
                <div class="panel-body" t-field="product.description_sale"/>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-heading" role="tab" id="oe_collapse_p_info">
                <h4 class="panel-title">
                  <a class="collapsed" role="button" data-toggle="collapse" data-parent="#oe_collapse_product" href="#oe_p_info" aria-expanded="false" aria-controls="oe_p_info">
                    Culture Information
                  </a>
                </h4>
              </div>
              <div id="oe_p_info" class="panel-collapse collapse" role="tabpanel" aria-labelledby="oe_collapse_p_info">
                <div class="panel-body" t-field="product.culture_information"/>
              </div>
            </div>
            <div class="oe_p_alt_button">
              <a href="#oe_p_recipe" t-if="product.recipe">
                <i class="fa fa-chevron-down"></i> Recipe
              </a>
            </div>
            <div class="oe_p_shop_button">
              <a class="oe_p_continue_shop" href="/shop">
                <i class="fa fa-undo"></i> Continue Shopping
              </a>
              <a class="oe_p_checkout" href="/shop/cart">
                Checkout <i class="fa fa-shopping-cart"></i>
              </a>

            </div>
          </div> <!-- pannel-group -->
        </div>
      </div> <!-- Product -->
      <!-- Alternative Products -->
      <div class="oe_cet_pd_alt_product oe_cet_pd_alt_section row"
        t-if="product.alternative_product_ids">
        <h2>Alternative Products</h2>
        <div class="col-xs-6 col-sm-3 col-md-2 col-lg-1" t-foreach="product.alternative_product_ids" t-as="p">
          <img class="img-responsive"
            t-attf-src="{{request.httprequest.url_root}}web/image/product.template/{{p.id}}/image"
            t-att-alt="product.name"/>
          <div class="oe_p_name">
            <a t-attf-href="/shop/product/#{ slug(p) }" t-field="p.name"/>
          </div>
        </div>
      </div>
      <!-- Recipe -->
      <div id="oe_p_recipe" class="oe_cet_pd_recipe oe_cet_pd_alt_section row"
        t-if="product.recipe">
        <h2>Recipe</h2>
        <div class="col-xs-12 col-lg-6" t-field="product.recipe"/>
      </div>
    </section>
  </template>


  <template id="product_view"
    inherit_id="website_sale.product"
    name="CET Product Design"
    customize_show="True"
    active="True">
    <xpath expr="//section" position="replace">
      <t t-if="product" t-call="cet_website_sale.product_detail_section"/>
    </xpath>
  </template>


</odoo>
